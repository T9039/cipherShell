<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>CipherShell // Terminal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='themes.css') }}"
    />
    <style>
      @import url("https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap");

      body {
        font-family: "JetBrains Mono", monospace;
        background-color: #000;
        background-image: linear-gradient(
          to bottom right,
          #0f0c29,
          #302b63,
          #24243e
        );
        color: var(--text);
        overflow: hidden;
        height: 100dvh;
        width: 100vw;
      }

      /* Glassmorphism Terminal */
      .terminal-window {
        background-color: color-mix(in srgb, var(--base), transparent 30%);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border: 0px;
      }

      @media (min-width: 768px) {
        .terminal-window {
          border: 1px solid var(--overlay);
          box-shadow: 0 0 40px rgba(0, 0, 0, 0.5);
        }
      }

      /* Scrollbar */
      ::-webkit-scrollbar {
        width: 6px;
      }
      ::-webkit-scrollbar-track {
        background: transparent;
      }
      ::-webkit-scrollbar-thumb {
        background: var(--accent);
        border-radius: 3px;
      }

      /* Utilities */
      .cli-input {
        background: transparent;
        border: none;
        color: var(--green);
        outline: none;
        width: 100%;
        font-family: inherit;
      }
      .cli-input::placeholder {
        color: var(--overlay);
        opacity: 0.5;
      }
      .tab-active {
        background-color: var(--accent);
        color: var(--base);
        font-weight: bold;
      }
      .tab-inactive {
        color: var(--overlay);
      }

      /* Animations */
      @keyframes glitch {
        0% {
          transform: translate(0);
          text-shadow:
            -2px 0 var(--red),
            2px 0 var(--text);
        }
        25% {
          transform: translate(-2px, 2px);
        }
        50% {
          transform: translate(2px, -2px);
          text-shadow:
            2px 0 var(--red),
            -2px 0 var(--text);
        }
        75% {
          transform: translate(-2px, -2px);
        }
        100% {
          transform: translate(0);
          text-shadow: none;
        }
      }
      @keyframes matrix-drop {
        0% {
          transform: translateY(-20px);
          opacity: 0;
          filter: brightness(2) blur(2px);
        }
        100% {
          transform: translateY(0);
          opacity: 1;
          filter: brightness(1) blur(0);
        }
      }
      .animate-glitch {
        animation: glitch 0.3s ease-in-out infinite;
      }
      .animate-matrix {
        animation: matrix-drop 0.8s forwards;
      }
    </style>
  </head>

  <body
    class="flex items-center justify-center md:p-4 p-0 bg-cover bg-center bg-fixed transition-all duration-500"
  >
    <div
      class="terminal-window w-full h-full md:h-[85vh] md:max-w-4xl flex flex-col md:rounded-lg overflow-hidden relative transition-all duration-300"
    >
      <div
        class="bg-[var(--crust)] p-3 md:p-2 flex justify-between items-center text-xs text-[var(--overlay)] select-none shrink-0 z-20"
      >
        <div class="text-left flex items-center gap-2">
          <span class="md:hidden">mobile@shell:~</span>
          <span class="hidden md:inline"
            >user@archlinux: ~/ciphershell (zsh)</span
          >
        </div>

        <div class="relative">
          <button
            onclick="toggleThemeMenu()"
            class="group flex items-center gap-2 px-2 py-1 rounded-sm border border-transparent hover:bg-[var(--overlay)] transition-all duration-200"
          >
            <div
              class="theme-icon w-3 h-3 group-hover:bg-[var(--base)] transition-colors"
            ></div>

            <span
              id="current-theme-label"
              class="text-[var(--text)] font-bold text-[10px] uppercase group-hover:text-[var(--base)] transition-colors"
            >
              RETRO
            </span>
          </button>

          <div
            id="theme-menu"
            class="hidden absolute top-full right-0 mt-2 w-40 bg-[var(--crust)] border border-[var(--overlay)] rounded shadow-2xl z-[70] overflow-hidden"
          >
            <div class="max-h-60 overflow-y-auto"></div>
          </div>
        </div>
      </div>

      <div
        class="flex-1 p-4 md:p-6 overflow-y-auto flex flex-col custom-scrollbar relative z-10"
      >
        <div
          class="mb-4 min-h-[100px] overflow-hidden flex flex-col justify-end items-center"
        >
          <pre
            id="ascii-logo"
            class="text-[var(--accent)] font-bold text-[6px] xs:text-[8px] md:text-sm leading-tight select-none whitespace-pre-wrap transition-all duration-1000 ease-in-out text-center"
          ></pre>
        </div>

        <div class="mb-6 text-xs md:text-sm text-[var(--text)]">
          <p>> CipherShell v2.1.0 (Terminal Mode)</p>
          <p class="hidden md:block">
            > Shortcuts:
            <span class="text-[var(--red)]">Ctrl+Shift+1..3</span> (Tabs) |
            <span class="text-[var(--red)]">Ctrl+G</span> (Gen Keys) |
            <span class="text-[var(--red)]">Ctrl+E/D</span> (Action)
          </p>
          <div class="border-b border-[var(--overlay)] my-4"></div>
        </div>

        <div
          class="flex md:hidden w-full mb-6 border-b border-[var(--overlay)] gap-1 select-none items-end"
        >
          <div
            id="mob-tab-gen"
            onclick="switchTab('generator')"
            class="flex-1 py-2 text-center text-xs font-bold rounded-t-lg cursor-pointer transition-all border-t border-l border-r border-[var(--overlay)] bg-[var(--accent)] text-[var(--base)] translate-y-[1px]"
          >
            GEN
          </div>
          <div
            id="mob-tab-vault"
            onclick="switchTab('vault')"
            class="flex-1 py-2 text-center text-xs font-bold rounded-t-lg cursor-pointer transition-all border-t border-l border-r border-transparent text-[var(--overlay)] hover:bg-[var(--overlay)] bg-[var(--crust)]"
          >
            VAULT
          </div>
          <div
            id="mob-tab-identity"
            onclick="switchTab('identity')"
            class="flex-1 py-2 text-center text-xs font-bold rounded-t-lg cursor-pointer transition-all border-t border-l border-r border-transparent text-[var(--overlay)] hover:bg-[var(--overlay)] bg-[var(--crust)]"
          >
            ID
          </div>
        </div>

        <div
          id="section-generator"
          class="flex-1 flex flex-col justify-start md:justify-center items-start space-y-6"
        >
          <div class="w-full">
            <p class="text-[var(--accent2)] mb-2">// PASSWORD_GENERATOR</p>
            <div class="flex flex-col md:flex-row gap-4 mb-6 text-sm">
              <button
                onclick="generatePass('random')"
                class="border border-[var(--green)] p-3 md:border-none md:p-0 text-center hover:text-white text-[var(--green)] transition-colors rounded md:rounded-none"
              >
                [ Random_Mode ]
              </button>
              <button
                onclick="generatePass('memorable')"
                class="border border-[var(--green)] p-3 md:border-none md:p-0 text-center hover:text-white text-[var(--green)] transition-colors rounded md:rounded-none"
              >
                [ Memorable_Mode ]
              </button>
            </div>
            <div
              class="bg-[var(--crust)] p-4 border-l-2 border-[var(--accent)] w-full"
            >
              <span class="text-[var(--overlay)] text-xs">$ output: </span>
              <div
                id="pass-output"
                class="text-lg md:text-xl text-[var(--text)] break-all mt-2 min-h-[3rem]"
              >
                _waiting_for_input
              </div>
            </div>
            <button
              onclick="copyToClipboard('pass-output')"
              class="mt-4 w-full md:w-auto border border-[var(--overlay)] p-2 md:border-none md:p-0 text-xs text-[var(--overlay)] hover:text-[var(--text)]"
            >
              [ Copy to Clipboard ]
            </button>
          </div>
        </div>

        <div id="section-vault" class="hidden flex-1 flex flex-col space-y-6">
          <p class="text-[var(--red)] mb-2">// SECURE_VAULT (AES-128)</p>
          <div class="space-y-6 w-full max-w-3xl">
            <div class="flex flex-col md:flex-row md:items-start gap-2">
              <span
                class="text-[var(--green)] whitespace-nowrap text-xs md:text-base"
                >user@vault:~/msg $</span
              >
              <textarea
                id="vault-input"
                rows="3"
                class="cli-input text-base md:text-sm resize-none bg-[var(--crust)] p-2 md:p-0 rounded md:rounded-none"
                placeholder="Enter plaintext..."
              ></textarea>
            </div>
            <div class="flex flex-col md:flex-row md:items-center gap-2">
              <span
                class="text-[var(--green)] whitespace-nowrap text-xs md:text-base"
                >user@vault:~/key $</span
              >
              <input
                type="password"
                id="vault-pass"
                class="cli-input text-base md:text-sm bg-[var(--crust)] p-2 md:p-0 rounded md:rounded-none"
                placeholder="Enter passphrase..."
              />
            </div>
            <div class="pt-4 flex flex-col md:flex-row gap-4 text-sm">
              <button
                onclick="processVault('encrypt')"
                class="border border-[var(--accent2)] p-3 md:border-none md:p-0 text-center text-[var(--accent2)] hover:bg-[var(--accent2)] hover:text-[var(--base)] rounded md:rounded-none transition-colors font-bold"
              >
                ENCRYPT >>
              </button>
              <button
                onclick="processVault('decrypt')"
                class="border border-[var(--red)] p-3 md:border-none md:p-0 text-center text-[var(--red)] hover:bg-[var(--red)] hover:text-[var(--base)] rounded md:rounded-none transition-colors font-bold"
              >
                << DECRYPT
              </button>
            </div>
            <div class="mt-6 border-t border-[var(--overlay)] pt-4 pb-12">
              <div class="text-[var(--overlay)] text-sm mb-1">STDOUT >></div>
              <div
                id="vault-result"
                class="text-[var(--text)] break-all font-mono text-sm"
              >
                // Process output will appear here...
              </div>
              <button
                onclick="copyToClipboard('vault-result')"
                class="mt-4 w-full md:w-auto border border-[var(--overlay)] p-2 md:border-none md:p-0 text-xs text-[var(--overlay)] hover:text-[var(--text)]"
              >
                [ Copy Output ]
              </button>
            </div>
          </div>
        </div>

        <div
          id="section-identity"
          class="hidden flex-1 flex flex-col space-y-8 pb-20"
        >
          <div>
            <p class="text-[var(--red)] mb-2 text-xs uppercase font-bold">
              // 1. MY_IDENTITY (KEYPAIR)
            </p>
            <button
              onclick="generateIdentity()"
              class="w-full md:w-auto mb-4 text-xs border border-[var(--green)] text-[var(--green)] px-3 py-3 md:py-1 hover:bg-[var(--green)] hover:text-[var(--base)] transition-colors rounded md:rounded-none"
            >
              [ GENERATE_NEW_KEYPAIR_2048 ]
            </button>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="relative group">
                <label class="text-[10px] text-[var(--green)] block mb-1"
                  >PUBLIC_KEY</label
                >
                <textarea
                  id="rsa-public"
                  readonly
                  class="w-full h-24 bg-[var(--crust)] border border-[var(--green)] p-2 text-[10px] leading-tight text-[var(--green)] resize-none focus:border-[var(--green)] outline-none font-mono rounded"
                ></textarea>
                <button
                  onclick="copyToClipboard('rsa-public')"
                  class="absolute top-2 right-2 text-[10px] bg-[var(--base)] border border-[var(--green)] px-2 py-1 hover:bg-[var(--green)] hover:text-black rounded"
                >
                  CPY
                </button>
              </div>
              <div class="relative group">
                <label class="text-[10px] text-[var(--red)] block mb-1"
                  >PRIVATE_KEY</label
                >
                <textarea
                  id="rsa-private"
                  readonly
                  class="w-full h-24 bg-[var(--crust)] border border-[var(--red)] p-2 text-[10px] leading-tight text-[var(--red)] resize-none focus:border-[var(--red)] outline-none font-mono rounded"
                ></textarea>
                <button
                  onclick="copyToClipboard('rsa-private')"
                  class="absolute top-2 right-2 text-[10px] bg-[var(--base)] border border-[var(--red)] px-2 py-1 hover:bg-[var(--red)] hover:text-black rounded"
                >
                  CPY
                </button>
              </div>
            </div>
          </div>
          <div class="border-t border-[var(--overlay)] pt-6">
            <p class="text-[var(--accent2)] mb-4 text-xs uppercase font-bold">
              // 2. ASYMMETRIC_MESSAGING
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
              <div
                class="space-y-2 bg-[var(--crust)] p-2 md:bg-transparent md:p-0 rounded"
              >
                <p class="text-xs text-[var(--overlay)]">
                  > Encrypt for recipient
                </p>
                <input
                  id="rsa-msg-in"
                  class="w-full bg-transparent border-b border-[var(--overlay)] py-2 md:py-1 text-base md:text-sm focus:border-[var(--accent2)] outline-none"
                  placeholder="Enter Message..."
                />
                <textarea
                  id="rsa-remote-key"
                  class="w-full h-20 bg-[var(--crust)] border border-[var(--overlay)] p-2 text-[10px] resize-none focus:border-[var(--accent2)] outline-none text-[var(--overlay)] rounded"
                  placeholder="Paste Recipient's Public Key Here..."
                ></textarea>
                <button
                  onclick="processRSA('encrypt')"
                  class="w-full border border-[var(--accent2)] text-[var(--accent2)] hover:bg-[var(--accent2)] hover:text-[var(--base)] py-3 md:py-1 text-sm transition-colors font-bold rounded md:rounded-none"
                >
                  ENCRYPT >>
                </button>
              </div>
              <div
                class="space-y-2 bg-[var(--crust)] p-2 md:bg-transparent md:p-0 rounded"
              >
                <p class="text-xs text-[var(--overlay)]">
                  > Decrypt with MY Private Key
                </p>
                <div class="hidden md:block h-[29px] w-full"></div>
                <textarea
                  id="rsa-cipher-in"
                  class="w-full h-20 bg-[var(--crust)] border border-[var(--overlay)] p-2 text-[10px] resize-none focus:border-[var(--red)] outline-none text-[var(--overlay)] rounded"
                  placeholder="Paste Ciphertext Here..."
                ></textarea>
                <button
                  onclick="processRSA('decrypt')"
                  class="w-full border border-[var(--red)] text-[var(--red)] hover:bg-[var(--red)] hover:text-[var(--base)] py-3 md:py-1 text-sm transition-colors font-bold rounded md:rounded-none"
                >
                  << DECRYPT
                </button>
              </div>
            </div>
            <div class="mt-6 pb-6">
              <span class="text-[var(--overlay)] text-xs">$ rsa_output: </span>
              <div
                id="rsa-result"
                class="text-sm text-[var(--text)] break-all font-mono mt-2 p-2 bg-[var(--crust)] rounded"
              >
                _waiting_
              </div>
              <button
                onclick="copyToClipboard('rsa-result')"
                class="mt-2 w-full md:w-auto border border-[var(--overlay)] p-2 md:border-none md:p-0 text-xs text-[var(--overlay)] hover:text-[var(--text)]"
              >
                [ Copy Output ]
              </button>
            </div>
          </div>
        </div>
      </div>

      <div
        class="flex bg-[var(--crust)] text-sm justify-between select-none z-50 border-t border-[var(--overlay)] shrink-0 p-2 md:p-0"
      >
        <div class="hidden md:flex flex-1 md:flex-none md:w-auto">
          <div
            id="tab-gen"
            onclick="switchTab('generator')"
            class="cursor-pointer px-4 tab-active flex gap-2 hover:bg-[var(--overlay)] transition-colors items-center py-1"
          >
            <span class="opacity-50">1</span><span>GEN</span>
          </div>
          <div
            id="tab-vault"
            onclick="switchTab('vault')"
            class="cursor-pointer px-4 tab-inactive flex gap-2 hover:bg-[var(--overlay)] transition-colors items-center py-1"
          >
            <span class="opacity-50">2</span><span>VAULT</span>
          </div>
          <div
            id="tab-identity"
            onclick="switchTab('identity')"
            class="cursor-pointer px-4 tab-inactive flex gap-2 hover:bg-[var(--overlay)] transition-colors items-center py-1"
          >
            <span class="opacity-50">3</span><span>ID</span>
          </div>
        </div>

        <div
          class="px-2 md:px-4 flex items-center py-1 w-full md:w-auto justify-between md:justify-end gap-4"
        >
          <span
            id="clock-display"
            class="text-[var(--accent2)] font-bold text-xs md:text-sm font-mono tracking-wide"
            >--:--</span
          >

          <button
            class="text-[var(--overlay)] hover:text-[var(--text)] text-[10px] md:text-xs font-bold border border-[var(--overlay)] px-2 rounded hover:bg-[var(--overlay)]/20 transition-all"
          >
            [ MODE: TERMINAL ]
          </button>
        </div>
      </div>
    </div>

    <script src="{{ url_for('static', filename='logos.js') }}"></script>
    <script src="{{ url_for('static', filename='animations.js') }}"></script>
    <script src="{{ url_for('static', filename='script2.js') }}"></script>
  </body>
</html>
